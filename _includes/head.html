<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>The Hack Farm</title>
  <style>
    @font-face {
      font-family: "SourceSerifProLight";
      src: url("/public/SourceSerifPro-ExtraLight.ttf");
    }
  </style>
  <link rel="stylesheet" href="{{ 'public/css/poole.css' | absolute_url }}">
  <link rel="stylesheet" href="{{ 'public/css/syntax.css' | absolute_url }}">
  <link rel="stylesheet" href="{{ 'public/css/hyde.css' | absolute_url }}">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ 'public/apple-touch-icon-144-precomposed.png' | absolute_url }}">
  <link rel="shortcut icon" href="{{ 'public/favicon.ico' | absolute_url }}">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="{{ '/atom.xml' | absolute_url }}">
  <script>
    function loadJSON(path, success, error) {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
          if (xhr.status === 200) {
            success(JSON.parse(xhr.responseText));
          }
          else {
            error(xhr);
          }
        }
      };
      xhr.open('GET', path, true);
      xhr.send();
  }

  function fn60sec() {
    loadJSON("https://thehack.farm/battery.json",myData,'jsonp');

    function myData(Data)
    {
      document.getElementById("battery").innerHTML = "Battery: " + Data.battery + "%";
      if (Data.kw > 0){
        document.getElementById("power").innerHTML = "Charging: " + Data.kw + "W";
      }else{
        document.getElementById("power").innerHTML = "Consuming: " + Data.kw + "W";
      }
    }
  }
  fn60sec();
  setInterval(fn60sec, 60*1000);


</script>
</head>
